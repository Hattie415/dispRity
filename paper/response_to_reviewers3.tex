\documentclass[12pt,letterpaper]{article}
\usepackage{natbib}

%Packages
\usepackage{fixltx2e}
\usepackage{textcomp}
\usepackage{fullpage}
\usepackage{float}
\usepackage{latexsym}
\usepackage{url}
\usepackage{epsfig}
\usepackage{graphicx}
\usepackage{amssymb}
\usepackage{amsmath}
\usepackage{mathtools}
\usepackage{bm}
\usepackage{array}
\usepackage[version=3]{mhchem}
\usepackage{ifthen}
\usepackage{caption}
\usepackage{hyperref}
\usepackage{amsthm}
\usepackage{amstext}
\usepackage{enumerate}
\usepackage[osf]{mathpazo}
\usepackage{dcolumn}
\usepackage{lineno}
\usepackage{pdflscape}

\DeclarePairedDelimiter\abs{\lvert}{\rvert}%
\DeclarePairedDelimiter\norm{\lVert}{\rVert}%
\newcolumntype{d}[1]{D{.}{.}{#1}}

\pagenumbering{arabic}


%Pagination style and stuff
\linespread{2}
\raggedright
\setlength{\parindent}{0.5in}
\setcounter{secnumdepth}{0} 
\renewcommand{\section}[1]{%
\bigskip
\begin{center}
\begin{Large}
\normalfont\scshape #1
\medskip
\end{Large}
\end{center}}
\renewcommand{\subsection}[1]{%
\bigskip
\begin{center}
\begin{large}
\normalfont\itshape #1
\end{large}
\end{center}}
\renewcommand{\subsubsection}[1]{%
\vspace{2ex}
\noindent
\textit{#1.}---}
\renewcommand{\tableofcontents}{}
%\bibpunct{(}{)}{;}{a}{}{,}

%---------------------------------------------
%
%       START
%
%---------------------------------------------

\begin{document}

%Running head
\begin{flushright}
Version dated: \today
\end{flushright}

\textbf{RE: MEE-18-03-218}\\
\bigskip
Dear Editor,\\
\bigskip

\noindent I am contacting you with to ask for a second opinion for a minor suggestions I received from the Associate Editor for an R package I wish to publish in MEE (MEE-18-03-218).
I chose to submit this package to MEE because the journal guidelines do not specifically requires R packages to be uploaded on the CRAN.
In my first submission (MEE-17-08-729) I explicitly stated that I did not wish to submit this package to CRAN (see detailed reasoning below).
Following this first submission, I was asked to implement major revisions --- which were very helpful and have substantially improved the package --- without mention of any requirements of submitting the package to the CRAN.
After re-submission (MEE-18-01-025), the revisions were very minor but included a request to submit the package to the CRAN.
I then contacted the assistant editor Chris Grieves, asking whether the CRAN submission was a requirement from MEE.
Chris assured me that there was no such requirement (see his e-mail below). 

However, upon re-submission of the minor revisions without the CRAN submission (MEE-18-01-025.R1), the associate editor rejected the paper and asked me to submit the package to the CRAN, despite my detailed reasoning of why I was not using the CRAN which I had provided in my response (MEE-18-01-025.R1).
This time, and despite my misgivings, I did comply with this request as far as I could; however, two features of the package could not be submitted to CRAN (MEE-18-03-218).
These two include the manual, which is in a gitbook format available online but not supported by the CRAN, and a minor utility function that depends a non-CRAN function (for more detail, see below).

I was surprised to receive yet another minor revision with a brief request to include these two non-CRAN-compatible features, but with no further details or reasons given.
Having complied with most of the revision requests in great detail, and having provided a CRAN version of the package (excluding the two minor exceptions noted above), I was hoping that an exception could be made in my case; or whether it might be possible to provide a platform for a discussion with the associate editor on the topic.

\bigskip

Best regards,

\bigskip

Thomas Guillerme

\bigskip

\newpage

\subsection{Chris Grieves' email on the CRAN as a requirement for MEE}

\noindent From: MEE coordinator@methodsinecologyandevolution.org\\
\noindent Subject: RE: Question to the associated editor\\
\noindent Date: 27 February 2018 at 19:22:05 GMT+10\\
\noindent To: "guillert@tcd.ie" guillert@tcd.ie\\

\bigskip

\noindent Dear Thomas,

\bigskip

\noindent Thank you for your email. As you have archived your code through GitHub and Zenodo, you are meeting the requirements of our new Policy on Publishing Code. While we do recommend CRAN as a repository, the combination of GitHub and Zenodo is absolutely fine.
 
I would recommend that you include your reasons for using GitHub, Zenodo and Travis rather than CRAN in your response to the decision letter. It would also be a good idea to note that your choices for storing your code does meet the requirements of our new policy (http://besjournals.onlinelibrary.wiley.com/hub/journal/10.1111/(ISSN)2041-210X/journal-resources/policy-on-publishing-code.html).
 
I hope that this email has been helpful. Please let me know if you have any further questions.

\bigskip 

\noindent Best wishes,

\bigskip

\noindent Chris



\subsection{Reasons for not submitting to the CRAN}

\begin{enumerate}

\item{\textbf{Package archiving (version control):}}
The CRAN keeps track of the former versions of packages by archiving older versions downloadable as standalone binaries.
This can also be achieved without the CRAN by publishing releases through using both GitHub and ZENODO.
For the dispRity package, each release since 2015 is downloadable as a standalone binary with a citable DOI \url{https://zenodo.org/search?page=1&size=20&q=conceptrecid:%22593021%22&sort=-version&all_versions=True} - a feature unfortunately not available on the CRAN.

\item{\textbf{CRAN checks:}}
The CRAN continuously tests whether the package can be compiled on multiple machines (this is useful when reverse dependencies issues occur).
This can also be achieved using the Travis CI that tests whether the package can be compiled identically as the CRAN and this for each branches of the package (release, development, etc... \url{https://travis-ci.org/TGuillerme/dispRity/builds}) - again, a feature not available on the CRAN.

\item{\textbf{Unit testing:}}
ALthough the CRAN supports unit-testing of the code, tested code is not necessary for a package to be submitted to the CRAN and no coverage of the test is measured by the CRAN.
On the other hand, it is possible to use test coverage APIs along with Travis CI such as codecov. 
Using this, the dispRity package is not only constantly tested for good compilation on Travis CI but each functions are also unit-tested for 94\% of the package (\url{https://codecov.io/gh/TGuillerme/dispRity/commits}).

\item{\textbf{Non-CRAN functions:}}
Although the CRAN does not explicitly forbids to use non-CRAN function (e.g. from GitHub packages), their integration is nearly impossible especially if the imported non-CRAN function also rely themselves on other non-CRAN binaries.
Not using the CRAN thus allows to integrate more functions from the community and, using Travis CI and codecov, allows the use of these functions to be still safe and stable.

\item{\textbf{Interactive vignettes:}}
The CRAN only allows vignettes to be compiled as pdf.
Although pdf documents have many advantages, I believe that they are not the most efficient way to document code, often forcing users to scan through the documentation by using Ctrl+F (or Cmd+F).
In my opinion, some formats like html allow to make much user friendly manuals: they have a more intuitive navigational system and allow to integrate much more interactive functionalities.
Based on my use of manuals I opted for this choice (\url{https://rawgit.com/TGuillerme/dispRity/master/inst/gitbook/_book/index.html}) which is unfortunately not supported by the CRAN.

\item{\textbf{CRAN reactivity:}}
Due to the number of packages currently available on the CRAN, the CRAN only allows a small number of submissions per year: \textit{Submitting updates should be done responsibly and with respect for the volunteersâ€™ time. [...] ``no more than every 1--2 months'' seems appropriate.} (\url{https://cran.r-project.org/web/packages/policies.html#Submission}).
This makes packages on the CRAN cumbersome to keep updated, especially when new R versions are release which usually always creates a couple of weeks ``delayed compatibility'' before all dependencies of the package are updated.

\end{enumerate}

\subsection{Reasons for not complying with the Associate Editor revisions - Decision on Manuscript ID MEE-18-03-218}

The Associate Editor suggested the following revisions: \textit{Please make sure that the CRAN version has the same features as the github version. In addition, please do your best to ensure that the CRAN version has vignettes.
}.
Here are the detailed reasons why I did not include these in the CRAN version (1.0.3).
Note that these differences are explicitly states in the package's patch note (\url{https://github.com/TGuillerme/dispRity/blob/master/NEWS.md}) and that the versions number is continuous (i.e. the GitHub version, 1.1 is $>$ than the CRAN version 1.0.3).
The CRAN version is therefore not a ``parallel'' version but effectively the version \textit{prior} to the GitHub release version.


\begin{enumerate}

\item{\textbf{Non-CRAN functions:}}

The function mentioned above that is not part of the CRAN version of the package (1.0.3) is the \texttt{Claddis.ordination} function.
This function intakes outputs from the Claddis package and ordinates them using \texttt{stats::prcomp} and is thus based on Graeme Lloyd's package Claddis (\url{https://github.com/graemetlloyd/Claddis}).
This package is not anymore available on the CRAN and I use a copy of the \texttt{Claddis::MorphoDistMatrixFast} function that uses non standard variable assignments not supported by the CRAN.
Really briefly, \texttt{Claddis::MorphoDistMatrixFast} uses an ``out of environment assignment'' (\texttt{x <<- y} rather than \texttt{x <- y}) which greatly improves the speed of the function itself.

This function is a minor utility function in the package (effectively running \texttt{stats::prcomp(Claddis::MorphDistMatrix(X))}) which can easily be done manually by users and will not affect the rest of the package (this function was based on a user suggestion).

\item{\textbf{Interactive vignettes:}}

The package manual is compiled using the excellent bookdown package (\url{https://CRAN.R-project.org/package=bookdown}).
This is a great tool that allows to generate vignettes as websites rather than pdfs (\url{https://rawgit.com/TGuillerme/dispRity/master/inst/gitbook/_book/index.html}).
This in turns allows to integrate many functionalities that are supported by any html5 compatible browser.
For example, one future update to the manual I will implement will use a \texttt{shiny} interface allowing users to interactively learn about specific analysis.
Specifically, I will develop a \texttt{shiny} interface to understand the various effect of various disparity metrics as part of a different standalone paper.

Unfortunately none of these advanced vignettes features are supported by the CRAN (yet?).
Furthermore, because of the relatively low CRAN reactivity (see point 6 above), it is not possible to update the package manual directly following users suggestion (i.e. I regularly update the manual when users ask me questions not covered by it).

Note that despite the absence of the vignettes, a detailed 60 pages long manual is still available on the CRAN version (\url{https://cran.r-project.org/web/packages/dispRity/dispRity.pdf}).
This function manual contains all the essential information for each functions (with many examples) and links directly to the GitHub page where the up-to-date vignette is located. 


\end{enumerate}

\end{document}
